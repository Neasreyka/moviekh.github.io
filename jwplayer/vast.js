!function(){"use strict";function t(t){for(;t.length>0;){var e=t.pop();e.parentNode&&e.parentNode.removeChild(e)}}function e(t,e,i,s){var a=document.createElement("iframe");a.src="javascript:false",t.style(a,{border:0,width:"100%",height:"100%",position:"absolute",overflow:"hidden"}),a.scrolling="no";var n=i.getElementsByClassName("jw-media")[0];n.appendChild(a);var r=a.contentWindow.document;return r.open().write("\n    <body onload=\"\n        var js = document.createElement('script');\n        js.src = '"+e+"';\n        js.addEventListener('load', function() { window.myCallback(); });\n        document.body.appendChild(js);\"\n    style=\"margin: 0\">"),a.contentWindow.myCallback=s,r.close(),a}function i(t){var e=[];return re.map(t,function(t){var i="iframe"===t.type||"html"===t.type?t.type:"static",s=void 0;t.trackers&&t.trackers.creativeView&&t.trackers.creativeView.length&&(s=t.trackers.creativeView),e.push({width:t.width,height:t.height,type:i,resource:t.source,creativeview:s,click:t.clickthrough})}),e}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[];return re.map(t,function(t){t.type.indexOf("flash")<0&&e.push(t)}),e}function a(t){return"application/javascript"===t.type||"application/x-javascript"===t.type}function n(t){return a(t)?"html5":"flash"}function r(t,e){for(var i=void 0,s="flash"===e,a=0;a<t.media.length;a++){var r=t.media[a];if(s){i=r;break}if("html5"===n(r)){i=r;break}}return i}function o(t,e){t.tracker=new ne(t.trackers,e)}function d(t,e){var i=void 0;return i="flash"===e?re.where(jwplayer.api.availableProviders,{name:"flash"}):re.filter(jwplayer.api.availableProviders,function(t){return"flash"!==t.name}),re.filter(t,function(t){return re.some(i,function(e){return e.supports(t)})})}function l(t,e,i){var s=document.createElement("param");s.setAttribute("name",e),s.setAttribute("value",i),t.appendChild(s)}function h(t,e){for(var i=0;i<t.length;i++){var s=t[i];e?s._vmap.item=i+1:s._adbreak={item:i+1,tags:s._adQueue,breakid:s._breakId}}}function p(t,e,i){var s=void 0;return pe.foreach(t,function(t,e){s=s||{},"_adQueue"===t?s[t]=e.slice():s[t]=e}),s&&(s.requestTimeout=e,s.creativeTimeout=i),s}function u(t,e){return"%"===t.toString().slice(-1)?e*parseFloat(t.slice(0,-1))/100:parseFloat(t)}function c(t){return fe.isString(t)?[t]:fe.isArray(t)?t.slice(0):t}function f(t){if("start"===t||"0%"===t)return"pre";if("end"===t||"100%"===t)return"post";if("pre"===t||"post"===t||fe.indexOf(t,"%")>-1)return t;var e=me.seconds(t);return!!fe.isNumber(e)&&e}function m(t,e){return 0===t?1/0:t||e}function v(t,e){if(!e)return t;var i=t.indexOf("?")>=0?"&":"?",s="cust_params=",a=t.indexOf(s),n=s.length,r="",o="";if(me.foreach(e,function(t,e){r=""+r+o+t+"="+e,o="&"}),r=encodeURIComponent(r),a>=0){var d=t.substr(0,a+n),l=t.substr(a+n);return""+d+r+"%26"+l}return""+t+i+"cust_params="+r}function y(t,e){var i=e.schedule||e.adschedule;i&&Object.keys(i).map(function(s){var a=i[s];a.ad&&(me.extend(a,a.ad),delete a.ad);var n=f(a.offset),r=m(a.requestTimeout,rt),o=m(a.creativeTimeout,ot),d={_offSet:n,_type:a.type,_breakId:s,requestTimeout:r,creativeTimeout:o};n===!1&&me.log("Error: ad offset format not supported",n);var l=a.skipoffset||e.skipoffset;fe.isUndefined(l)||(d.skipoffset=l);var h=a.adbreakid;h&&(d.adbreakid=h);var p=a.adtagid;if(p&&(d._adTagQueue=c(p)),a.tag){var u=v(a.tag,a.custParams);d._adQueue=c(u),d._waterfallIndex=0}else{if(!fe.isString(a.vastxml))return void me.log("Error: no ad tag provided");d._adXML=a.vastxml}switch(n){case"pre":t.setPreRoll(d);break;case"post":t.setPostRoll(d);break;default:t.addMidRoll(d)}})}function g(t,e){ye.style(t,{opacity:e||1})}function A(t){ye.style(t,{opacity:0})}function P(){g(Pe)}function k(){g(Pe,.75)}function T(){g(Ae)}function w(){g(Ae,.5)}function E(t,e){for(var i=b(t,"AdBreak",nt),s=t.lookupNamespaceURI(nt),a=0;a<i.length;a++){var n={},r={},o=i[a],d=I(o,"timeOffset"),l=I(o,"breakId"),h=I(o,"breakType"),p=b(o,"AdSource",nt)[0],u=I(p,"id"),c=b(o,"AdTagURI",nt)[0],f=b(o,"VASTData",nt)[0]||b(o,"VASTAdData",nt)[0],m=I(c,"templateType"),v=S(c),y=_(s,o,"Tracking",nt);if(n._type=h,n._vmap={id:u,breakid:l,timeoffset:d},f)n._adXML=b(f,"VAST")[0];else{if("vast1"!==m&&"vast2"!==m&&"vast3"!==m&&"vast4"!==m)continue;n._adQueue=[v],n._waterfallIndex=0}if(y)for(var g=0;g<y.length;g++)C(r,y[g]);switch(n._trackers=r,n._type=h,d){case"start":n._offSet="pre",e.setPreRoll(n);break;case"100%":case"end":n._offSet="post",e.setPostRoll(n);break;default:if(/^#/.test(d))break;/^\d\d?(?:\.\d+)?%$/.test(d)?n._offSet=d:n._offSet=_e.seconds(d),e.addMidRoll(n)}}e.sort(null,!0)}function b(t,e,i){var s=[];return t&&(s=t.getElementsByTagName(e),i&&s&&0===s.length&&(s=t.getElementsByTagName(i+":"+e))),s}function _(t,e,i,s){var a=[];return t||e?a=e.getElementsByTagNameNS?e.getElementsByTagNameNS(t,i):e.getElementsByTagName(s+":"+i):a}function I(t,e){return t?t.getAttribute(e):null}function C(t,e){var i=I(e,"event");if("progress"===i){var s=I(e,"offset");i=i+"_"+s}var a=S(e);x(t,i,a)}function S(t){if(t){var e=t.textContent||t.text;if(e)return _e.trim(e)}return""}function x(t,e,i){t[e]||(t[e]=[]),i&&t[e].push(i)}function V(t,e,i){var s=b(t,e);Ie.map(s,function(t){x(i,e.toLowerCase(),S(t))})}function R(t){var e=b(b(t,"Creatives")[0],"Creative"),i={},s={trackers:i};return s.adsystem=S(b(t,"AdSystem")[0]),Ie.map(e,function(t){var e=b(t,"Linear")[0],a=b(t,"NonLinear")[0],n=b(b(t,"TrackingEvents")[0],"Tracking");(e||a)&&Ie.map(n,function(t){C(i,t)});var r=S(b(t,"AdParameters")[0]);if(r&&(s.adParams=r),e){var o=b(e,"VideoClicks")[0],d=S(b(o,"ClickThrough")[0]),l=b(o,"ClickTracking"),h=I(e,"skipoffset");Ie.map(l,function(t){x(i,"click",S(t))}),d&&(s.clickthrough=d),h&&(s.skipoffset=h),M(e,s)}else if(a){var p=S(b(a,"NonLinearClickThrough")[0]);p&&(s.clickthrough=p),H(t,s)}else j(t,s)}),s}function L(t){var e=b(t,"Video")[0]||t,i=b(t,"NonLinear")[0],s={},a={trackers:s};if(e){var n=b(b(t,"TrackingEvents")[0],"Tracking");Ie.map(n,function(t){C(s,t)});var r=b(b(t,"Impression")[0],"URL");Ie.map(r,function(t){x(s,"impression",S(t))});var o=b(b(t,"Error")[0],"URL");Ie.map(o,function(t){x(s,"error",S(t))});var d=b(e,"VideoClicks")[0],l=S(b(d,"ClickThrough")[0]),h=b(b(d,"ClickTracking")[0],"URL");Ie.map(h,function(t){x(s,"click",S(t))}),l&&(a.clickthrough=l),M(e,a);var p=b(e,"AdParameters")[0];if(p){var u=I(p,"apiFramework");"vpaid"===u.toLowerCase()&&(Ie.map(a.media,function(t){t.adType=u}),a.adParams=S(p))}}if(i){var c=a.media||[],f=b(i,"URL")[0];c.push({type:I(i,"creativeType"),file:S(f),adType:I(i,"apiFramework")}),a.media=c}var m=b(t,"CompanionAds")[0];return m=b(m,"Companion"),a.companions||(a.companions=[]),Ie.map(m,function(t){a.companions.push({width:parseInt(I(t,"width"),10),height:parseInt(I(t,"height"),10),type:I(t,"resourceType"),resource:S(b(t,"URL")[0]),trackers:[],clickthrough:""})}),a}function M(t,e){var i=b(b(t,"MediaFiles")[0],"MediaFile"),s=e.media?e.media:[];Ie.map(i,function(t){var e={type:I(t,"type"),file:S(t),adType:I(t,"apiFramework")||"",width:parseInt(I(t,"width"),10)||0,height:parseInt(I(t,"height"),10)||0};e.file&&s.push(e)}),e.media=s}function H(t,e){var i=[],s=b(t,"StaticResource")[0];s&&(i.push({type:I(s,"creativeType"),file:S(s),adType:I(b(t,"NonLinear")[0],"apiFramework")||"static",minDuration:I(b(t,"NonLinear")[0],"minSuggestedDuration")||"00:00:00"}),e.media=i)}function j(t,e){var i=b(b(t,"CompanionAds")[0],"Companion"),s=e.companions?e.companions:[];Ie.map(i,function(t){var e=b(t,"StaticResource")[0],i=b(t,"IFrameResource")[0],a=b(t,"HTMLResource")[0],n={},r=void 0,o=void 0;if(e)r=I(e,"creativeType"),o=S(e);else if(i)r="iframe",o=S(i);else{if(!a)return;r="html",o=S(a)}var d=b(b(t,"TrackingEvents")[0],"Tracking");Ie.map(d,function(t){var e=I(t,"event");x(n,e,S(t))});var l=S(b(t,"CompanionClickThrough")[0]);s.push({width:parseInt(I(t,"width"),10),height:parseInt(I(t,"height"),10),type:r,source:o,trackers:n,clickthrough:l})}),e.companions=s}function D(t,e){var i=_e.extend({},t);return _e.foreach(e,function(t,s){_e.exists(i[t])?"array"===_e.typeOf(s)?i[t]=i[t].concat(s):"object"===_e.typeOf(s)?i[t]=_e.extend(i[t],e[t]):i[t]=s:i[t]=s}),i}function O(t){t&&(t.onload=null,t.onreadystatechange=null,t.onerror=null,t.abort&&t.abort())}function N(t,e,i){var s=[];return i.foreach(e,function(e,a){t.companions&&(a.companions=(a.companions?a.companions:[]).concat(t.companions)),t.trackers&&(a.trackers=F(a.trackers,t.trackers,i)),t.sequence&&(a.sequence=t.sequence),s.push(a)}),s}function F(t,e,i){return t=t||{},i.foreach(e,function(e,i){t[e]?t[e]=t[e].concat(i):t[e]=i}),t}function q(t,e){return U(t)?t:e.parseXML(t)}function U(t){return"object"==typeof Node?t instanceof Node:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function B(t,e,i,s){if(!t)return t;var a=X(e),n=a.item,r=window.location.href;t=W(t,"__random-number__",Math.random()*Math.pow(10,18)),t=W(t,"__timestamp__",(new Date).getTime()),t=W(t,"__page-url__",encodeURIComponent(r)),t=W(t,"__referrer__",encodeURIComponent(document.referrer)),t=W(t,"__player-height__",a.playerHeight),t=W(t,"__player-width__",a.playerWidth),t=W(t,"__item-duration__",a.itemDuration),t=W(t,"__domain__",encodeURIComponent(i)),t=s.companion?W(t,"__companion-div__",s.companion.id):W(t,"__companion-div__","");for(var o=t.match(new RegExp(/__item-[a-z 0-9 A-Z]*__/g)),d=0;o&&d<o.length;d++){var l=o[d],h=l.substring(7,l.length-2);if(n.hasOwnProperty(h)&&e._.isString(n[h])){var p=n[h];p.length>1e3&&(p=p.substring(0,1e3)),t=W(t,l,encodeURIComponent(p))}else t=W(t,l,"")}return t=Q(t)}function Q(t){return Re.test(t)||Le.test(t)?t+="&sdk3p=jwplayer":Me.test(t)&&(t+=";sdk3p=jwplayer"),t}function W(t,e,i){return t.replace(e,i)}function X(t){var e=t.getConfig();return{playerHeight:t.getHeight()||e.height||"",playerWidth:t.getWidth()||e.width||"",itemDuration:z(t.getDuration(),3)||"",item:e.playlist[t.getPlaylistIndex()]||{}}}function z(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}function K(t){return t._adQueue&&t._waterfallIndex<t._adQueue.length}var G="vast",Y="-1",$="This ad will end in xx seconds.",J="Ad __AD_POD_CURRENT__ of __AD_POD_LENGTH__. ",Z=-1,tt="Advertisement",et="Skip ad in xx",it="Skip",st="time",at="[ERRORCODE]",nt="vmap",rt=5e3,ot=15e3,dt="state",lt="buffering",ht="paused",pt="idle",ut="playing",ct="complete",ft="fullscreen",mt="volume",vt="mute",yt="error",gt="adClick",At="adCompanions",Pt="adComplete",kt="adError",Tt="adImpression",wt="beforePlay",Et="adMeta",bt="adPause",_t="adPlay",It="adSkipped",Ct="adTime",St="none",xt="auto",Vt={QUARTILE:"quartile",REMAINING_TIME:"remainingTimeChange",SKIPPED:"skipped",STARTED:"started",STOPPED:"stopped",CLICK:"click",PLAY:"play",IMPRESSION:"impression",PAUSE:"pause",ERROR:"error",COMPLETE:"complete",CLOSE:"close",EXPANDED_CHANGE:"expandedChange"},Rt="AdLoaded",Lt="AdImpression",Mt="AdStarted",Ht="AdStopped",jt="AdLinearChange",Dt="AdExpandedChange",Ot="AdRemainingTimeChange",Nt="AdVideoFirstQuartile",Ft="AdVideoMidpoint",qt="AdVideoThirdQuartile",Ut="AdVideoComplete",Bt="AdClickThru",Qt="AdPaused",Wt="AdPlaying",Xt="AdSkipped",zt="AdError",Kt="fullscreen",Gt="normal",Yt=40,$t=66,Jt=150,Zt=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},te=function(){function t(e,i,s,a,n,r){var o=this;Zt(this,t),this.player=e,this.utils=e.utils,this._=e._,this.swf=i,this.adTag=a,this.adParams=n,this.vpaidControls=r,this.resumeOnAdStopped=!1,this.paused=!1,this.flashThrottled=!1,this.type="vpaid",this.blocking=null,this.vpaidState={linear:!1,expanded:!1,remainingTime:-1};var d=-1;this._.extend(this,e.Events),this.utils.isChrome()&&this.swf.on("throttle",function(t){clearTimeout(d),"resume"===t.state?(o.flashThrottled=!1,o.onAdPlaying(o.vpaidState),o.setPointerEventsStyle(St),o.callVPAID("resumeAd")):d=setTimeout(function(){o.setPointerEventsStyle(xt),o.callVPAID("pauseAd"),o.onAdPaused(o.vpaidState),o.flashThrottled=!0},250)},this),this.swf.triggerFlash("vast:loadVpaid",s,this.genCallback(this.vpaidLoadSuccess.bind(this)),this.genCallback(this.vpaidError.bind(this)))}return t.prototype.vpaidLoadSuccess=function(){this.setPointerEventsStyle(xt),this.addVPAIDListener(Rt,this.onAdLoaded),this.addVPAIDListener(Mt,this.onAdStarted),this.addVPAIDListener(Lt,this.onAdImpression),this.addVPAIDListener(jt,this.onLinearChange),this.addVPAIDListener(Dt,this.onExpandedChange),this.addVPAIDListener(Qt,this.onAdPaused),this.addVPAIDListener(Wt,this.onAdPlaying),this.addVPAIDListener(Ht,this.onAdStopped),this.addVPAIDListener(Ut,this.onAdComplete),this.addVPAIDListener(Ot,this.onRemainingTimeChangeHandler),this.addVPAIDListener(Bt,this.onAdClick),this.addVPAIDListener(Xt,this.onAdSkipped),this.addVPAIDListener(zt,this.vpaidError),this.addVPAIDListener(Nt,this.onFirstQuartile),this.addVPAIDListener(Ft,this.onMidpoint),this.addVPAIDListener(qt,this.onThirdQuartile);var t=this.player.getSafeRegion(!1);this.callVPAID("initAd",t.width,t.height+t.y,this.fullscreenMode(),0,this.adParams)},t.prototype.setPointerEventsStyle=function(t){this.utils.isIE()&&"PointerEvent"in window&&(this.swf.style.pointerEvents=t)},t.prototype.fullscreenMode=function(){return this.player.getFullscreen()?"fullscreen":"normal"},t.prototype.vpaidError=function(){this.sendEvent(Vt.ERROR)},t.prototype.sendEvent=function(t,e){this.flashThrottled||(e=e||{},e.linear=this.vpaidState.linear?"linear":"nonlinear",e.tag=this.adTag,this.trigger(t,e))},t.prototype.updateVpaidState=function(t){t&&(this._.isBoolean(t.linear)&&(this.vpaidState.linear=t.linear),this._.isBoolean(t.expanded)&&(this.vpaidState.expanded=t.expanded),this._.isNumber(t.remainingTime)&&(this.vpaidState.remainingTime=t.remainingTime))},t.prototype.onAdLoaded=function(t){this.onLinearChange(t),this.setVPAIDProperty("adVolume",this.player.getMute()?0:this.player.getVolume()/100),this.callVPAID("startAd")},t.prototype.onAdStarted=function(t){this.updateVpaidState(t),t.linear&&this.blocking&&!this.vpaidControls&&this.blocking.hide(),this.sendEvent(Vt.STARTED),this.sendEvent(Vt.PLAY,{oldstate:lt,newstate:ut})},t.prototype.onAdImpression=function(t){this.updateVpaidState(t),this.sendEvent(Vt.IMPRESSION)},t.prototype.onAdClick=function(t){this.updateVpaidState(t),this.sendEvent(Vt.CLICK,{url:t.url,playerHandles:t.playerHandles})},t.prototype.onAdSkipped=function(t){this.updateVpaidState(t),this.sendEvent(Vt.SKIPPED)},t.prototype.onLinearChange=function(t){this.updateVpaidState(t);var e=void 0,i=void 0,s=void 0;if(t.linear){if(this.blocking)this.vpaidControls||this.blocking.hide();else{this.resumeOnAdStopped=!0,this.player.setControls(!1);var a=this.player.getState();a!==ut&&a!==lt||this.player.pause(!0)}s=this.player.getSafeRegion(!1),i=s.height+s.y,e=s.width}else this.blocking?(this.blocking.destroy(),this.blocking=null):this.resumeOnAdStopped&&(this.player.play(!0),this.player.setControls(!0)),s=this.player.getSafeRegion(!0),i=s.height+s.y,e=s.width;this.callVPAID("resizeAd",e,i,this.fullscreenMode())},t.prototype.onExpandedChange=function(t){this.updateVpaidState(t),this.sendEvent(Vt.EXPANDED_CHANGE,{expanded:this.vpaidState.expanded})},t.prototype.onAdStopped=function(t){this.updateVpaidState(t),this.resumeOnAdStopped&&(this.player.play(!0),this.player.setControls(!0)),this.setPointerEventsStyle(St),this.sendEvent(Vt.STOPPED)},t.prototype.onAdComplete=function(){this.setPointerEventsStyle(St),this.sendEvent(Vt.COMPLETE)},t.prototype.onAdPaused=function(t){this.updateVpaidState(t),this.paused||(this.paused=!0,this.sendEvent(Vt.PAUSE,{newstate:ht,oldstate:ut}))},t.prototype.onAdPlaying=function(t){this.updateVpaidState(t),this.paused&&(this.paused=!1,this.sendEvent(Vt.PLAY,{newstate:ut,oldstate:ht}))},t.prototype.onRemainingTimeChangeHandler=function(t){this.updateVpaidState(t),this.sendEvent(Vt.REMAINING_TIME,{remainingTime:t.remainingTime})},t.prototype.onFirstQuartile=function(t){this.handleQuartile(1,t)},t.prototype.onMidpoint=function(t){this.handleQuartile(2,t)},t.prototype.onThirdQuartile=function(t){this.handleQuartile(3,t)},t.prototype.handleQuartile=function(t,e){this.updateVpaidState(e),this.sendEvent("quartile",{quartile:t,remainingTime:e.remainingTime})},t.prototype.callVPAID=function(){var t=Array.prototype.slice.call(arguments);t.unshift("vast:callVpaid"),this.swf.triggerFlash.apply(this.swf,t)},t.prototype.setVPAIDProperty=function(t,e){this.swf.triggerFlash("vast:setVpaidProperty",t,e)},t.prototype.addVPAIDListener=function(t,e){this.swf.triggerFlash("vast:addVpaidListener",t,this.genCallback(e.bind(this)))},t.prototype.genCallback=function(t){var e=t.name?t.name.replace("bound ",""):"",i=this.player.id+":vast:"+e+":"+Math.random().toString(16).substr(2);return this.swf.on(i,t,this),i},t.prototype.genEvent=function(t){var e=this;return function(i){e.on(t,i)}},t.prototype.setVolume=function(t){this.setVPAIDProperty("adVolume",t/100)},t.prototype.volume=function(){},t.prototype.mute=function(){},t.prototype.play=function(){this.callVPAID("resumeAd")},t.prototype.pause=function(){this.callVPAID("pauseAd")},t.prototype.stop=function(){this.callVPAID("stopAd")},t.prototype.resize=function(){var t=this.player.getSafeRegion(!this.vpaidState.linear);this.callVPAID("resizeAd",t.width,t.height+t.y,this.fullscreenMode())},t.prototype.removeEvents=function(){this.off()},t.prototype.destroy=function(){this.removeEvents(),this.setPointerEventsStyle(St),this.swf.off(null,null,this),this.blocking=null},t.prototype.getState=function(){return this.vpaidState.linear?this.paused?ht:ut:pt},t}(),ee=function(){function i(t,s,a,n,r){Zt(this,i),this.player=t,this._=t._,this.state=t.state,this.vpaidURL=s,this.adTag=a,this.adParams=n,this.vpaidControls=r,this.type="vpaid",this.blocking=null,this.toRemove=[],this.vpaidState={linear:!1,expanded:!1,remainingTime:-1},this.paused=!1,this._.extend(this,t.Events),this.setMuteCallback=this.setMute.bind(this),this.playerContainer=this.player.getContainer(),this.iframe=e(t.utils,this.vpaidURL,this.playerContainer,this.callback.bind(this)),this.toRemove.push(this.iframe)}return i.prototype.sendEvent=function(t,e){e=e||{},e.tag||(e.tag=this.adTag),this.trigger(t,e)},i.prototype.handleQuartile=function(t,e){this.sendEvent("quartile",{quartile:e,duration:t.getAdDuration()})},i.prototype.genEvent=function(t){var e=this;return function(i){e.on(t,i)}},i.prototype.setMute=function(){this.player.setMute(!this.vpaidAd.getAdVolume())},i.prototype.userActive=function(){var t=this.player.utils.hasClass(this.playerContainer,"jw-flag-time-slider-above");this.player.utils.style(this.iframe,{bottom:t?$t:Yt})},i.prototype.userInactive=function(){"paused"!==this.player.getState()&&this.player.utils.style(this.iframe,{bottom:"0.5em"})},i.prototype.prepareNonlinearAd=function(){var t=!this.player.utils.hasClass(this.playerContainer,"jw-flag-user-inactive");this.player.utils.style(this.iframe,{height:Jt}),this.resize(null,Jt),this.userActive(t),this.player.on("userActive",this.userActive,this),this.player.on("userInactive",this.userInactive,this),this.blocking&&(this.blocking.applyProviderListeners(null),this.blocking.destroy(),this.blocking=null)},i.prototype.genListeners=function(e){var i=this;return{AdLoaded:function(){e.startAd()},AdStarted:function(){e.getAdLinear()?i.blocking&&!i.vpaidControls&&i.blocking.hide():i.prepareNonlinearAd(),i.sendEvent("play",{oldstate:lt,newstate:ut,linear:e.getAdLinear()?"linear":"nonlinear"}),i.sendEvent("started"),e.subscribe(i.setMuteCallback,"AdVolumeChange",e)},AdStopped:function(){t(i.toRemove),i.player.setControls(!0),i.sendEvent("stopped")},AdPaused:function(){i.paused||(i.paused=!0,i.sendEvent("pause",{newstate:ht,oldstate:ut}))},AdPlaying:function(){i.paused&&(i.paused=!1,i.sendEvent("play",{newstate:ut,oldstate:ht,linear:e.getAdLinear()?"linear":"nonlinear"}))},AdLinearChange:function(){if(e.getAdLinear())if(i.player.utils.style(i.iframe,{height:"100%"}),i.player.off(null,null,i),i.blocking)i.vpaidControls||i.blocking.hide();else{i.player.setControls(!1);var t=i.player.getState();t!==ut&&t!==lt||i.player.pause(!0)}else i.prepareNonlinearAd(),i.player.play(!0),i.player.setControls(!0)},AdDurationChange:function(){i.sendEvent("remainingTimeChange",{duration:e.getAdDuration(),remainingTime:e.getAdRemainingTime()})},AdRemainingTimeChange:function(){i.sendEvent("remainingTimeChange",{duration:e.getAdDuration(),remainingTime:e.getAdRemainingTime()})},AdExpandedChange:function(){i.sendEvent("expandedChange",{expanded:e.getAdExpanded()})},AdSkipped:function(){i.sendEvent("skipped")},AdVideoFirstQuartile:function(){i.handleQuartile(e,1)},AdVideoMidpoint:function(){i.handleQuartile(e,2)},AdVideoThirdQuartile:function(){i.handleQuartile(e,3)},AdVideoComplete:function(){i.sendEvent("complete")},AdUserClose:function(){i.sendEvent("close")},AdImpression:function(){i.sendEvent("impression",{linear:e.getAdLinear()?"linear":"nonlinear"})},AdClickThru:function(t,e,s){i.sendEvent("click",{id:e,url:t,playerHandles:s})},AdError:function(e,s){t(i.toRemove),i.sendEvent("error",{message:e,code:s})}}},i.prototype.callback=function(){var t=this.vpaidAd=this.iframe.contentWindow.getVPAIDAd(),e=t.handshakeVersion("2.0");if(parseFloat(e)<1)throw new Error("Invalid vpaid version in handshake");this.listeners=this.genListeners(t),this._.each(this.listeners,t.subscribe,t);var i="normal",s=1e3,a={AdParameters:this.adParams},n=this.playerContainer.getElementsByClassName("jw-media")[0],r=this.video=n.getElementsByTagName("video")[0],o=this.iframe.contentWindow.document.createElement("div");o.className="jw-vpaid-wrapper",o.style.height="100%",this.iframe.contentWindow.document.body.appendChild(o),r?r.removeAttribute("preload"):(r=this.video=document.createElement("video"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),n.insertBefore(r,this.iframe),this.toRemove.push(r));var d={videoSlot:r,slot:o};t.initAd(n.clientWidth,n.clientHeight,i,s,a,d)},i.prototype.play=function(){this.vpaidAd.resumeAd()},i.prototype.pause=function(){this.vpaidAd.pauseAd()},i.prototype.stop=function(){if(this.vpaidAd)try{this.vpaidAd.stopAd()}catch(t){console.log("Unhandled exception from VPAID2 Creative stopAd",t)}},i.prototype.setVolume=function(t){this.vpaidAd.setAdVolume(t/100)},i.prototype.resize=function(t,e){if(this.vpaidAd&&this.vpaidAd.resizeAd){var i=this.player.getFullscreen()||document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen,s=i?Kt:Gt;this.vpaidAd.resizeAd(t||this.player.getWidth(),e||this.player.getHeight(),s)}},i.prototype.destroy=function(){if(t(this.toRemove),this.removeEvents(),this.vpaidAd)try{this._.each(this.listeners,this.vpaidAd.unsubscribe,this.vpaidAd),this.vpaidAd.unsubscribe(this.setMuteCallback,"AdVolumeChange")}catch(e){console.log("Unhandled exception from VPAID2 Creative",e)}this.blocking=null},i.prototype.removeEvents=function(){this.player.off(null,null,this),this.off()},i.prototype.attachMedia=function(){},i.prototype.detachMedia=function(){},i.prototype.volume=function(){},i.prototype.mute=function(){},i.prototype.getState=function(){return this.vpaidState.linear?this.paused?ht:ut:pt},i}(),ie=jwplayer.utils,se=jwplayer._,ae=[],ne=function(){function t(e,i){var s=this;Zt(this,t),this.map=e,this.debugTrackFn=i,this.lastQuartile=0,this.progressEvents=[],this.started=!1,this.firedError=!1,this.hasComp=!1,se.map(e,function(t){if(e.hasOwnProperty(t)&&0===t.indexOf("progress")){var i=""+t.split("_")[1],a={key:t,offset:i,tracked:!1,percentage:!1};/^\d+%$/.test(i)?(a.percentage=!0,a.offset=parseFloat(i)):a.offset=ie.seconds(i),s.progressEvents.push(a)}}),this.setFactories()}return t.prototype.getUrls=function(t){return this.map.hasOwnProperty(t)?this.map[t]:[]},t.prototype.addUrl=function(t,e){this.map.hasOwnProperty(t)?this.map[t].push(e):(this.map[t]=[],this.map[t].push(e))},t.prototype.trackPings=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getUrls(t),s=[],a=[];se.map(i,function(t){if(t){se.each(e,function(e,i){t=t.replace(i,e)});var i=new Image;i.src=t,s.push(t),a.push(i)}});for(var n=ae.length;n--&&(ae[n].width||ae[n].complete);)ae.length=n;Array.prototype.push.apply(ae,a),se.isFunction(this.debugTrackFn)&&this.debugTrackFn({type:"ping",data:{pingType:t,urls:s,images:a}})},t.prototype.start=function(){this.started=!0,this.trackPings("start")},t.prototype.breakStart=function(){this.started=!0,this.trackPings("breakStart")},t.prototype.time=function(t,e){if(!(e<=1)){for(var i=(4*t+.05)/e|0;i>this.lastQuartile&&this.lastQuartile<3;)this.lastQuartile++,1===this.lastQuartile?this.trackPings("firstQuartile"):2===this.lastQuartile?this.trackPings("midpoint"):3===this.lastQuartile&&this.trackPings("thirdQuartile");this.trackProgress(t,e)}},t.prototype.trackProgress=function(t,e){for(var i=this.progressEvents.length;i--;){var s=this.progressEvents[i];if(!s.tracked){var a=s.offset;s.percentage&&(a=e*a/100),t>=a&&(s.tracked=!0,this.trackPings(s.key))}}},t.prototype.error=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:900;this.firedError=!0;var e={};e[at]=t,this.trackPings("error",e)},t.prototype.factory=function(t){var e=this;return function(){e.trackPings(t)}},t.prototype.setFactories=function(){this.creativeView=this.factory("creativeView"),this.click=this.factory("click"),this.skip=this.factory("skip"),this.complete=this.factory("complete"),this.pause=this.factory("pause"),this.resume=this.factory("resume"),this.mute=this.factory("mute"),this.unmute=this.factory("unmute"),this.fullscreen=this.factory("fullscreen"),this.expand=this.factory("expand"),this.collapse=this.factory("collapse"),this.acceptInvitation=this.factory("acceptInvitation"),this.close=this.factory("close"),this.rewind=this.factory("rewind"),this.impression=this.factory("impression"),this.breakEnd=this.factory("breakEnd")},t}(),re=jwplayer._,oe=function(){function t(e,i,s,a,n,r){Zt(this,t),this.player=i,this.utils=i.utils,this._=i._,this.staticPlayer=s,this.companion=a,this.optionalParams=n,this.debugTrackFn=r,this.scheduledAd=e.scheduledAd(),this.vastBuffet=e.adBuffet(),this.vastAdPod=e.adPod(),this.vastAd=this.vastBuffet.length?this.vastBuffet[0]:null,this.adType=null,this.vpaidPlayer=null,this.instreamPlayer=null,this.blockingInstreamPlayer=null,this.mediaType=null,this.adPodItems=null,this.creativeTimeout=null,this.vastOptions=null,this.duration=0,this.adPodIndex=0,this.initialIndex=0,this.utils.extend(this,i.Events)}return t.prototype.init=function(t){this.init=function(){throw new Error("Adplayer can only be initialized once")},this.blockingInstreamPlayer=t;var e=this.prepareAdPod();return!!e&&(this.playAd(),this.player.on("fullscreen",this.playerFullscreenHandler,this),this.player.on("volume",this.playerVolumeHandler,this),this.player.on("mute",this.playerMuteHandler,this),this.player.on("resize",this.playerResizeHandler,this),!0)},t.prototype.getProviderType=function(){var t=this.player.getProvider();return 0===t.name.indexOf("flash")?"flash":t.name},t.prototype.flashSwf=function(){var t=this.player.getContainer();return t.querySelector("object")},t.prototype.prepareAdPod=function(){var t=this,e=null,i=0,s=[],a=this.getProviderType();if(this.vastAd&&(o(this.vastAd,this.debugTrackFn),e=this.prepareAdPodItem(this.vastAd),e&&"vpaid"===e.adType&&!r(this.vastAd,a)&&(e=null)),this.vastAdPod)for(var n=null,d=0;d<this.vastAdPod.length;d++){var l=this.vastAdPod[d];o(l,this.debugTrackFn);var h=this.prepareAdPodItem(l);if(h){if(n!==h.adType&&"instream"===n)break;if(n=h.adType,"vpaid"!==h.adType||r(l,a)){var p=s.length+i===d;h&&p&&s.push(h)}else i++}else i++}if(!s.length&&!e)return this.adError("No Compatible Creatives",403),!1;var u=void 0;return s.length?(u=s,this.vastOptions=[],this._.map(u,function(e){t.vastOptions.push(t.getInstreamOptions(e.vastAd))})):(u=e,this.vastOptions=this.getInstreamOptions(this.vastAd)),this.adPodItems=u,this.adPodIndex=0,!0},t.prototype.prepareAdPodItem=function(t){t.tracker.linear="linear";var e=this.getProviderType(),i=(""+t.media[0].adType).toLowerCase()||"instream";"vpaid"!==i||r(t,e)||(i="instream");var s={vastAd:t,sources:[],adType:i};this.scheduledAd.skipoffset&&(s.skipoffset=this.scheduledAd.skipoffset);var a=t.media,n={};if(this._.map(a,function(t){s.sources.push({file:t.file,type:t.type}),n[t.file]={width:t.width||0,height:t.height||0}}),s=jwplayer.playlist.item(s),"instream"===i&&(s.sources=d(s.sources,e)),0===s.sources.length)return null;this.mediaType=(""+s.sources[0].mimeType).toLowerCase(),s.vastAd.selectedMedia=s.sources[0];var o=this.player.getSafeRegion(!0),l=null,h=null;return this._.map(s.sources,function(t){var e=n[t.file];e.width<=o.width&&(!l||e.width>n[l.file].width)&&(l=t),e.width>=o.width&&(!h||e.width<n[h.file].width)&&(h=t)}),l?(s.vastAd.selectedMedia=l,l["default"]=!0):h&&(s.vastAd.selectedMedia=h,h["default"]=!0),s},t.prototype.getInstreamOptions=function(t){var e=this.optionalParams.skipoffset>=0?this.optionalParams.skipoffset:null;return{skipoffset:t.skipoffset||this.scheduledAd.skipoffset||e,skipMessage:this.optionalParams.skipMessage,skipText:this.optionalParams.skipText}},t.prototype.getVastAd=function(t){if(this.adPodItems){var e=void 0;if(e=this.adPodItems.length?this.adPodItems[t]:this.adPodItems,e.vastAd)return e.vastAd}else if(this.vastAdPod&&this.vastAdPod.length)return this.vastAdPod[t];return this.vastAd},t.prototype.adError=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:900;clearTimeout(this.creativeTimeout);var i=this.adEventObject();if(i.code=e,i.message=t,this.vastAdPod&&this.adPodIndex<this.vastAdPod.length-1)return void this.trigger("adPodError",i);var s=this.getVastAd(this.adPodIndex),a=s.tracker;a.error(e),s.wrappedTags&&(i.wrappedTags=s.wrappedTags),this.trigger(kt,i)},t.prototype.playAd=function(){var t=this.adPodItems[this.adPodIndex]||this.adPodItems;if(this.adType=t.adType,"vpaid"===this.adType)this.playVpaid(t.vastAd);else if("static"===this.adType)this.playStatic(),this.clearBlocking();else{var e=this._.isArray(this.adPodItems)?this.adPodItems.slice(this.adPodIndex):this.adPodItems,i=this._.isArray(this.vastOptions)?this.vastOptions.slice(this.adPodIndex):this.vastOptions;this.initialIndex=this.adPodIndex,this.playInstream(e,i),this.clearBlocking()}},t.prototype.clearVpaidBlocking=function(){if(this.vpaidPlayer.blocking){var t=this.vpaidPlayer.blocking;this.vpaidPlayer.blocking=null,this.clearBlocking(t)}},t.prototype.clearBlocking=function(t){t=t||this.blockingInstreamPlayer,t&&t!==this.instreamPlayer&&t.destroy()},t.prototype.getState=function(){return this.instreamPlayer?this.instreamPlayer.getState():this.vpaidPlayer?this.vpaidPlayer.getState():""},t.prototype.clearNonlinear=function(){this.staticPlayer.stop(),this.vpaidPlayer&&(this.clearVpaidBlocking(),this.vpaidPlayer&&(this.vpaidPlayer.stop(),this.vpaidPlayer.destroy(),this.vpaidPlayer=null))},t.prototype.destroy=function(){this.off(),this.removePlayerListeners(),this.instreamPlayer&&this.instreamPlayer.destroy(),this.vpaidPlayer&&(this.clearVpaidBlocking(),this.vpaidPlayer&&this.vpaidPlayer.destroy()),this.clearNonlinear(),this.vastLoader=null,this.player=null,this.vpaidPlayer=null,this.instreamPlayer=null,this.scheduledAd=null,this.vastBuffet=null,this.vastAd=null,this.vastAdPod=null},t.prototype.pause=function(){this.instreamPlayer?this.instreamPlayer.pause():this.vpaidPlayer&&this.vpaidPlayer.pause()},t.prototype.play=function(){this.instreamPlayer?this.instreamPlayer.play():this.vpaidPlayer&&this.vpaidPlayer.play()},t.prototype.removePlayerListeners=function(){this.player&&(this.player.off(ft,this.playerFullscreenHandler,this),this.player.off(mt,this.playerVolumeHandler,this),this.player.off(vt,this.playerMuteHandler,this)),this.instreamPlayer&&this.instreamPlayer.off(),this.vpaidPlayer&&(this.vpaidPlayer.removeEvents(),this.clearVpaidBlocking()),this.staticPlayer.stop(),this.staticPlayer.removeEvents()},t.prototype.adEventObject=function(){var t=this.scheduledAd._adQueue||{},e={id:this.scheduledAd._id,tag:this.scheduledAd._currentTag,
client:"vast",witem:this.scheduledAd._waterfallIndex||1,wcount:t.length||1,viewable:this.player.getViewable()};return this.scheduledAd._adbreak&&(e.adschedule=this.scheduledAd._adbreak,e.adschedule.offset=this.scheduledAd._offSet),this.adPodItems&&this.adPodItems.length&&(e.sequence=this.adPodIndex+1,e.podcount=this.adPodItems.length),this.mediaType&&(e.creativetype=this.mediaType),this.scheduledAd._vmap&&(e.vmap=this.scheduledAd._vmap),e},t.prototype.playStatic=function(){this.vastAd.tracker.linear="nonlinear";var t=this.vastAd.media[0];this.vastAd.selectedMedia=t;var e=this.vastAd.clickthrough||"",i=this.staticPlayer;i.removeEvents(),i.on("play",this.impressionHandler,this),i.on("play",this.playHandler,this),i.on("complete",this.combinedCompleteHandler,this),i.on("click",this.clickStaticHandler,this),i.on("error",this.staticErrorHandler,this),i.playAd(t.file,e,t.minDuration,this.scheduledAd._currentTag,this.scheduledAd.requestTimeout)},t.prototype.creativeAdError=function(t,e){this.adError(t,e),this.adPodItems&&this.adPodItems.length-1>this.adPodIndex&&(this.vpaidPlayer&&this._.isFunction(this.vpaidPlayer.destroy)&&this.vpaidPlayer.destroy(),this.adPodIndex++,this.playAd())},t.prototype.playVpaid=function(t){var e=this;clearTimeout(this.creativeTimeout),this.creativeTimeout=setTimeout(function(){e.creativeAdError("VPAID tag communication timeout")},this.scheduledAd.creativeTimeout),this.vastAd=t;var i=r(t,this.getProviderType());if(this.vastAd.selectedMedia=i,this.mediaType=i.type,"flash"===n(i)){var s=this.flashSwf();this.vpaidPlayer=new te(this.player,s,i.file,this.scheduledAd._currentTag,this.vastAd.adParams,this.optionalParams.vpaidcontrols)}else this.vpaidPlayer=new ee(this.player,i.file,this.scheduledAd._currentTag,this.vastAd.adParams,this.optionalParams.vpaidcontrols);this.blockingInstreamPlayer&&this.blockingInstreamPlayer.applyProviderListeners(this.vpaidPlayer),this.vpaidPlayer.blocking=this.blockingInstreamPlayer,this.vpaidPlayer.on("play",this.playHandler,this),this.vpaidPlayer.on("pause",this.pauseHandler,this),this.vpaidPlayer.on("quartile",this.quartileHandler,this),this.vpaidPlayer.on("remainingTimeChange",this.remainingTimeHandler,this),this.vpaidPlayer.on("click",this.clickVpaidHandler,this),this.vpaidPlayer.on("error",this.playbackErrorHandler,this),this.vpaidPlayer.on("impression",this.impressionHandler,this),this.vpaidPlayer.on("expandedChange",this.vpaidExpandedHandler,this),this.vpaidPlayer.on("close",this.adCloseHandler,this),this.vpaidPlayer.on("skipped",this.adSkipped,this),this.vpaidPlayer.on("stopped",this.endOfVpaidAdHandler,this),this.vpaidPlayer.on("complete",this.adCompleteHandler,this),this.vpaidPlayer.on("started",this.adStartedHandler,this)},t.prototype.playInstream=function(t,e){var i=this;clearTimeout(this.creativeTimeout),this.creativeTimeout=setTimeout(function(){i.creativeAdError("VAST tag communication timeout")},this.scheduledAd.creativeTimeout),this.blockingInstreamPlayer?this.instreamPlayer=this.blockingInstreamPlayer:this.instreamPlayer=this.player.createInstream().init(),this.instreamPlayer.on("play",this.playHandler,this),this.instreamPlayer.on("pause",this.pauseHandler,this),this.instreamPlayer.on("time",this.timeHandler,this),this.instreamPlayer.on("playlistItem",this.playlistItemHandler,this),this.instreamPlayer.on("complete",this.adCompleteHandler,this),this.instreamPlayer.on("playlistComplete",this.endOfAdBreakHandler,this),this.instreamPlayer.on("mute",this.muteHandler,this),this.instreamPlayer.on("instreamClick",this.clickInstreamHandler,this),this.instreamPlayer.on("adSkipped",this.adSkipped,this),this.instreamPlayer.on("error",this.playbackErrorHandler,this),this.instreamPlayer.on("mediaError",this.playbackErrorHandler,this),this.instreamPlayer.loadItem(t,e)},t.prototype.playerFullscreenHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=e.tracker;t.fullscreen&&i.started&&i.fullscreen()},t.prototype.playerResizeHandler=function(t){this.vpaidPlayer&&this.vpaidPlayer.resize(t)},t.prototype.playerVolumeHandler=function(t){this.vpaidPlayer&&this.vpaidPlayer.setVolume(t.volume)},t.prototype.playerMuteHandler=function(t){this.vpaidPlayer&&this.vpaidPlayer.setVolume(t.mute?0:this.player.getVolume())},t.prototype.playlistItemHandler=function(t){this.instreamPlayer&&(this.adPodIndex=t.index+this.initialIndex)},t.prototype.impressionHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=e.tracker;i.impression();var s=this.adEventObject();s.adposition=this.scheduledAd._position||"",s.adtitle=e.adTitle||"",s.adsystem=e.adsystem||"",s.wrapper=e.wrapper||"",s.vastversion=e.vastversion,s.clickThroughUrl=e.clickthrough,s.mediafile={file:e.selectedMedia.file},s.linear=t.linear||i.linear,this.trigger(Tt,s)},t.prototype.playHandler=function(t){clearTimeout(this.creativeTimeout);var e=this.getVastAd(this.adPodIndex),a=e.tracker,n=void 0;if(a.started)t.oldstate===ht&&(a.resume(),this.dispatchPlay(t));else{this.vpaidPlayer&&(a.linear=t.linear),this.instreamPlayer&&this.impressionHandler({linear:a.linear});var r=this.utils.extend({linear:a.linear},this.adEventObject(),this.getInstreamOptions(e));r.message=this.optionalParams.dynamicMessage||"",r.clickthrough=e.clickthrough,r.sequence&&(r.podMessage=this.optionalParams.podMessage||""),e.adTitle&&(r.title=e.adTitle),e.companions&&(r.companions=e.companions),this.player.dispatchEvent(Et,r),e.companions&&(n=this.adEventObject(),n.companions=i(e.companions),this.player.dispatchEvent(At,n));var o=this.companion,d=void 0;d=this.utils.flashVersion()>9?e.companions:s(e.companions),this.optionalParams.companion&&d&&d.length&&(a.hasComp=o.addCompanion(this.optionalParams.companion,d)),a.start(),a.creativeView(),this.dispatchPlay(t)}},t.prototype.dispatchPlay=function(t){if("static"!==this.adType&&("vpaid"!==this.adType||"linear"===t.linear)){var e=t.oldstate,i=t.newstate,s=this.adEventObject();s.oldstate=e,s.newstate=i,this.player.dispatchEvent(_t,s),this.vpaidPlayer&&this.vpaidPlayer.trigger(dt,{newstate:i,oldstate:e})}},t.prototype.pauseHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=e.tracker;i.pause();var s=t.oldstate,a=t.newstate,n=this.adEventObject();n.oldstate=t.oldstate,n.newstate=t.newstate,this.player.dispatchEvent(bt,n),this.vpaidPlayer&&this.vpaidPlayer.trigger(dt,{newstate:a,oldstate:s})},t.prototype.remainingTimeHandler=function(t){t.duration?this.duration=t.duration:this.duration=Math.max(1,this.duration,t.remainingTime);var e=t.remainingTime>=0?this.duration-t.remainingTime:0;this.timeHandler({position:e,duration:this.duration})},t.prototype.quartileHandler=function(t){if(t.duration)this.duration=t.duration;else{var e=4*t.remainingTime/(4-t.quartile);this.duration=Math.max(this.duration,1,e)}this.timeHandler({position:this.duration*t.quartile*.25,duration:this.duration})},t.prototype.timeHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=t.position,s=t.duration,a=s-i,n=e.tracker,r=this.optionalParams.dynamicMessage||"",o=this.optionalParams.podMessage||"";if(n&&n.time(i,s),r&&a>0){if(r=r.replace(/xx/gi,""+Math.ceil(a)),this.adPodItems&&this.adPodItems.length>1){var d=this.adPodIndex+1;o=o.replace(/__AD_POD_CURRENT__/g,""+d),o=o.replace(/__AD_POD_LENGTH__/g,""+this.adPodItems.length),r=o+r}this.instreamPlayer?this.instreamPlayer.setText(r):this.vpaidPlayer&&this.vpaidPlayer.blocking&&this.vpaidPlayer.blocking.setText(r)}var l=this.adEventObject();l.position=i,l.duration=s,this.player.dispatchEvent(Ct,l)},t.prototype.combinedCompleteHandler=function(){this.adCompleteHandler(),this.endOfAdBreakHandler()},t.prototype.adCompleteHandler=function(){var t=this.getVastAd(this.adPodIndex),e=t.tracker;e.firedError||(e.complete(),this.player.dispatchEvent(Pt,this.adEventObject()))},t.prototype.adCloseHandler=function(){var t=this.getVastAd(this.adPodIndex),e=t.tracker;e.firedError||e.close()},t.prototype.adStartedHandler=function(){this.player.dispatchEvent("adStarted",this.adEventObject())},t.prototype.endOfVpaidAdHandler=function(){return this.adPodItems&&this.adPodItems.length-1>this.adPodIndex?(this.vpaidPlayer&&this._.isFunction(this.vpaidPlayer.destroy)&&this.vpaidPlayer.destroy(),this.vpaidPlayer=null,this.adPodIndex++,void this.playAd()):void this.endOfAdBreakHandler()},t.prototype.endOfAdBreakHandler=function(){this.removePlayerListeners(),this.trigger(Pt)},t.prototype.muteHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=e.tracker;i&&(t.mute?(i.mute(),this.vpaidPlayer&&this.vpaidPlayer.setVolume(0)):(i.unmute(),this.vpaidPlayer&&this.vpaidPlayer.setVolume(this.player.getVolume()/100)))},t.prototype.clickStaticHandler=function(){var t=this.getVastAd(this.adPodIndex);this.player.pause(!0),this.clickThrough(t)},t.prototype.clickVpaidHandler=function(t){var e=this.getVastAd(this.adPodIndex);t&&t.url&&t.playerHandles&&(e.clickthrough=t.url),this.clickThrough(e)},t.prototype.clickInstreamHandler=function(){this.instreamPlayer.getState()!==ht&&this.clickThrough(this.getVastAd(this.adPodIndex))},t.prototype.clickThrough=function(t){t.tracker.click(),this.player.dispatchEvent(gt,this.adEventObject()),window.jwcast&&window.jwcast.player.id||t.clickthrough&&window.open(t.clickthrough)},t.prototype.adSkipped=function(){this.getVastAd(this.adPodIndex).tracker.skip(),this.player.dispatchEvent(It,this.adEventObject())},t.prototype.playbackErrorHandler=function(t){var e=t.message||"Error Playing Ad Tag",i=t.code||400;this.vpaidPlayer&&this._.isFunction(this.vpaidPlayer.off)?(this.vpaidPlayer.off(),this.creativeAdError(e,i)):this.adError(e,i)},t.prototype.staticErrorHandler=function(){this.adError("Unable to fetch NonLinear resource",502)},t.prototype.vpaidExpandedHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=e.tracker;t.expanded?i.expand():i.collapse()},t}(),de=jwplayer.utils,le=jwplayer._,he=function(){function t(e){Zt(this,t),this.debugTrackFn=e,this.div=null,this.elem=null}return t.prototype.addCompanion=function(t,e){if(this.div=t,this.elem=document.getElementById(this.div.id),!this.elem)return!1;for(var i=0;i<e.length;i++)if(this.fitsDiv(e[i]))return this.placeCompanion(e[i]),!0;return!1},t.prototype.removeCompanion=function(){this.elem.innerHTML=""},t.prototype.sendPings=function(t){t=t.creativeView,t&&(le.map(t,function(t){var e=new Image;e.src=t}),le.isFunction(this.debugTrackFn)&&this.debugTrackFn({type:"companion",data:{trackers:t}}))},t.prototype.placeCompanion=function(t){if(this.removeCompanion(),"html"===t.type){var e=document.createElement("div");e.innerHTML=t.source;var i=e.getElementsByTagName("script");return i.length&&le.map(i,function(t){var e=new de.scriptloader(t.src);e.load(),t.parentElement.removeChild(t)}),this.elem.appendChild(e),void this.sendPings(t.trackers)}if("iframe"===t.type){var s=document.createElement("iframe");return s.height=this.div.height,s.width=this.div.width,s.src=t.source,s.scrolling="no",s.style.border="none",s.marginWidth=0,s.marginHeight=0,this.sendPings(t.trackers),this.elem.innerHTML="",void this.elem.appendChild(s)}if("application/x-shockwave-flash"===t.type){if(de.isMSIE()){var a='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"\n                    width="100%" height="100%"\n                    id="'+this.elem.id+'" name="'+this.elem.id+'"\n                    tabindex=0">\n                    <param name="movie" value="'+t.source+'">\n                    <param name="allowfullscreen" value="true">\n                    <param name="allowscriptaccess" value="always">\n                    <param name="scale" value="exactfit">\n                    <param name="seamlesstabbing" value="true">\n                    <param name="wmode" value= "opaque">\n                </object>';this.elem.innerHTML=a}else{var n=document.createElement("object");n.setAttribute("type","application/x-shockwave-flash"),n.setAttribute("data",t.source),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("tabindex",0),l(n,"allowfullscreen","true"),l(n,"allowscriptaccess","always"),l(n,"seamlesstabbing","true"),l(n,"wmode","opaque"),this.elem.appendChild(n)}return void this.sendPings(t.trackers)}var r=new Image;r.src=t.source,de.exists(t.clickthrough)&&(r.onclick=function(){var e=window.open(t.clickthrough,"_blank");e.focus()}),this.elem.innerHTML="",this.elem.appendChild(r),this.sendPings(t.trackers)},t.prototype.fitsDiv=function(t){return t.width===this.div.width&&t.height===this.div.height},t}(),pe=jwplayer.utils,ue=jwplayer._,ce=function(){function t(){Zt(this,t),this.preRoll=null,this.vmap=null,this.postRoll=null,this.midRolls=[],this.playedMidRolls=[]}return t.prototype.setPreRoll=function(t){this.preRoll=t},t.prototype.getPreRoll=function(){return p(this.preRoll,this.requestTimeout,this.creativeTimeout)},t.prototype.getPostRoll=function(){return p(this.postRoll,this.requestTimeout,this.creativeTimeout)},t.prototype.getNextMidRoll=function(t,e){if(this.sort(e),this.midRolls.length>this.playedMidRolls.length){var i=this.getClosestIndex(t,e);if(i>=0&&this.playedMidRolls.indexOf(i)<0){var s=this.midRolls[i];return this.playedMidRolls.push(i),p(s,this.requestTimeout,this.creativeTimeout)}}return null},t.prototype.getMidRolls=function(){var t=[];return pe.foreach(this.midRolls,function(e,i){t.push(p(i))}),t},t.prototype.reset=function(){this.playedMidRolls=[]},t.prototype.addMidRoll=function(t){this.midRolls.push(t)},t.prototype.setPostRoll=function(t){this.postRoll=t},t.prototype.sort=function(t,e){(!t||t<1)&&(t=1),this.midRolls.sort(function(e,i){return u(e._offSet,t)-u(i._offSet,t)}),h(this.getAllAds(),e)},t.prototype.getAllAds=function(){var t=this.preRoll?[this.preRoll]:[],e=this.postRoll?[this.postRoll]:[];return t.concat(this.midRolls,e)},t.prototype.getAdScheduleEventObject=function(){var t=this.getAllAds(),e=[],i={tag:this.getVMAP(),client:"vast",adbreaks:[]};return ue.map(t,function(t){var i={type:t._type,offset:t._offSet};t._vmap?i.vmap=t._vmap:i.adbreak=t._adbreak,e.push(i)}),i.adbreaks=e,i},t.prototype.setVMAP=function(t){this.vmap=t},t.prototype.isVMAP=function(){return!!this.vmap},t.prototype.getVMAP=function(){return this.vmap},t.prototype.getClosestIndex=function(t,e){for(var i=this.midRolls.length;i--;)if(t>=u(this.midRolls[i]._offSet,e))return i;return-1},t}(),fe=jwplayer._,me=jwplayer.utils,ve=function(){function t(){Zt(this,t)}return t.prototype.getSchedule=function(t){var e=new ce;if(e.requestTimeout=m(t.requestTimeout,rt),e.creativeTimeout=m(t.creativeTimeout,ot),t.tag)e.setPreRoll({_offSet:"pre",_adQueue:c(t.tag),_waterfallIndex:0});else if(fe.isString(t.vastxml))e.setPreRoll({_offSet:"pre",_adXML:t.vastxml});else{if(fe.isString(t.schedule))return e.setVMAP(t.schedule),e;if(fe.isString(t.adschedule))return e.setVMAP(t.adschedule),e;y(e,t)}return e.sort(),e},t.prototype.getOptParams=function(t){var e={cuetext:t.cuetext||tt,dynamicMessage:t.admessage||$,podMessage:t.podmessage||J,skipoffset:t.skipoffset||Z,skipMessage:t.skipmessage||et,skipText:t.skiptext||it,vpaidcontrols:t.vpaidcontrols||!1},i=t.companiondiv;return i&&(e.companion={id:i.id,height:i.height,width:i.width}),e},t}(),ye=jwplayer.utils,ge=ye.UI,Ae=document.createElement("img"),Pe=document.createElement("img");Ae.src=Pe.src='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><circle cx="32" cy="32" r="32" fill="#191919"/><line stroke="#CCC" stroke-width="6" x1="32" y1="20" x2="32" y2="44"/><line stroke="#CCC" stroke-width="6" x1="20" y1="32" x2="44" y2="32"/></svg>',Ae.className="jw-vast-nonlinear-open-button",Pe.className="jw-vast-nonlinear-close-button";var ke={cursor:"pointer",position:"absolute",margin:"auto",left:0,right:0,bottom:0,display:"block"},Te="opacity 0.2s",we={"-webkit-transition":Te,transition:Te},Ee=function(){function t(e,i,s,a,n){Zt(this,t),this.player=e,this.div=a,this.staticURL=i,this.clickURL=s,this.loadTimer=-1,this.animationTimer=-1,this.banner=null,ye.extend(this,e.Events),this.banner=document.createElement("img"),this.banner.className="jw-banner",this.banner.id=this.player.id+"_vast_static",A([Pe,Ae]),this.remove(Ae),this.div.appendChild(this.banner),this.div.appendChild(Pe),this.loadTimer=setTimeout(this.imageLoadError.bind(this),n),this.banner.onerror=this.imageLoadError.bind(this),this.banner.onload=this.onLoaded.bind(this),this.banner.src=this.staticURL}return t.prototype.onLoaded=function(){return clearTimeout(this.loadTimer),0===this.banner.naturalWidth?void this.imageLoadError():(this.removeBannerEventListeners(),ye.style(Pe,{top:-this.banner.height-8,bottom:this.banner.height-8,left:this.banner.width},!0),ye.style(Ae,{top:-16},!0),g([this.div,this.banner]),g(Pe,.75),new ge(this.banner).on("click tap",this.sendClick.bind(this)),ye.isMobile()||(this.div.onmouseover=P,this.div.onmouseout=k),Pe.onclick=Pe.ontouchstart=this.collapse.bind(this),Ae.onclick=Ae.ontouchstart=this.expand.bind(this),void this.trigger(Vt.PLAY))},t.prototype.imageLoadError=function(){clearTimeout(this.loadTimer),this.trigger(Vt.ERROR),this.removeBanner()},t.prototype.sendClick=function(){this.trigger(Vt.CLICK)},t.prototype.collapse=function(t){var e=this;this.animationTimer===-1&&(t.preventDefault(),this.div.onmouseover=this.div.onmouseout=null,A([this.banner,Pe,Ae]),this.div.appendChild(Ae),this.animationTimer=setTimeout(function(){e.remove(e.banner),e.remove(Pe),g(Ae,.5),e.div.onmouseover=T,e.div.onmouseout=w,e.animationTimer=-1},250))},t.prototype.expand=function(t){var e=this;this.animationTimer===-1&&(t.preventDefault(),this.div.onmouseover=this.div.onmouseout=null,this.div.appendChild(this.banner),this.div.appendChild(Pe),this.animationTimer=setTimeout(function(){g([e.banner,Pe]),e.div.onmouseover=P,e.div.onmouseout=k,e.animationTimer=-1},50),A(Ae))},t.prototype.remove=function(t){this.div.contains(t)&&this.div.removeChild(t)},t.prototype.removeBannerEventListeners=function(){this.banner.onload=this.banner.onerror=null},t.prototype.removeBanner=function(){this.removeBannerEventListeners(),this.remove(this.banner)},t.prototype.removeListeners=function(){clearTimeout(this.loadTimer),clearTimeout(this.animationTimer),this.div.onmouseover=this.div.onmouseout=Pe.onclick=Ae.onclick=null,this.off(),this.removeBannerEventListeners()},t.prototype.stop=function(){A([this.div,this.banner,Pe,Ae]),setTimeout(this.removeBanner.bind(this),400),this.remove(Pe),this.remove(Ae)},t}(),be=function(){function t(e,i){Zt(this,t),this.player=e,this.div=i,this.startTime=0,this.minDur=0,ye.extend(this,e.Events),this.type="static",e.on("time",this.dispatchTime,this)}return t.prototype.playAd=function(t,e,i,s,a){this.minDur=ye.seconds(i),this.adTag=s,this["static"]&&(this["static"].removeListeners(),this["static"].stop()),this.div.style.opacity=0,this.div.style.visibility="visible";var n=ye.isFF()?{}:we;ye.style(this.div,ye.extend({top:"",position:"absolute",width:"100%"},n)),ye.style([Pe,Ae],ye.extend({width:"18px",height:"18px",opacity:.75},ke,n)),ye.style(Pe,{transform:"rotate(45deg)"}),this["static"]=new Ee(this.player,t,e,this.div,a),this["static"].on(Vt.PLAY,this.startAd,this),this["static"].on(Vt.CLICK,this.clickHandler,this),this["static"].on(Vt.ERROR,this.errorHandler,this)},t.prototype.dispatchTime=function(t){this.trigger(st,t)},t.prototype.startAd=function(){this.startTime=this.player.getPosition(),this.minDur>0&&(0===this.startTime?this.on(st,this.startTimingAd,this):this.on(st,this.timeAd,this)),this.sendEvent(Vt.PLAY)},t.prototype.startTimingAd=function(t){this.startTime=t.position,this.off(st,this.startTimingAd,this),this.on(st,this.timeAd,this)},t.prototype.timeAd=function(t){var e=t.position-this.startTime;e>this.minDur&&(this.off(st,this.timeAd,this),this.stop())},t.prototype.clickHandler=function(){this.sendEvent(Vt.CLICK)},t.prototype.errorHandler=function(){this.sendEvent(Vt.ERROR)},t.prototype.sendEvent=function(t,e){e=e||{},e.tag=e.tag||this.adTag,this.trigger(t,e)},t.prototype.removeEvents=function(){this.off()},t.prototype.getState=function(){return ut},t.prototype.stop=function(){this.startTime&&this["static"]&&(this.startTime=0,this.minDur=0,this.off(st,this.startTimingAd,this),this.off(st,this.timeAd,this),this["static"].removeListeners(),this["static"].stop(),this.sendEvent(Vt.COMPLETE))},t.prototype.pause=function(){},t}(),_e=jwplayer.utils,Ie=jwplayer._,Ce=function(){function t(e){Zt(this,t),this._parsedAds=[],this._error=null,e&&this.parse(e)}return t.prototype.parsedAds=function(){return this._parsedAds},t.prototype.error=function(){return this._error},t.prototype.parse=function(t){var e=this,i=void 0,s=void 0,a=[];"VAST"===t.nodeName?i=t:(i=b(t,"VAST")[0],i||(i=b(t,"VideoAdServingTemplate")[0])),i||this.throwError(101,"Invalid VAST response"),s="VideoAdServingTemplate"===i.tagName?1:parseFloat(I(i,"version")||0);var n=b(i,"Ad");Ie.map(n,function(t){var i=e.parseAd(s,t);i.vastversion=s,a.push(i)}),this._parsedAds=a},t.prototype.parseAd=function(t,e,i){i=i||{};var s=b(e,"InLine")[0],a=b(e,"Wrapper")[0],n=s?s:a,r=n?S(b(n,"AdTitle")[0]):"",o=void 0;return i.sequence=I(e,"sequence"),i.adTitle=r,(!t||t>4||t<1)&&this.throwError(102,"Vast version not supported"),n?(t>=2?(o=R(n),V(n,"Impression",o.trackers),V(n,"Error",o.trackers)):o=L(n),a&&(o.wrappedURI=S(b(a,"VASTAdTagURI")[0])||S(b(a,"VASTAdTagURL")[0])),o=D(i,o)):this.throwError(101,"Invalid VAST response"),o},t.prototype.throwError=function(t,e){var i=this;throw this._error={code:t,message:e,toString:function(){return i.code+" "+i.message}},this._error},t}(),Se=function(){function t(e,i,s){Zt(this,t),this._scheduledAd=e,this.player=i,this.utils=i.utils,this._=i._,this.options=s||{},this.utils.extend(this,i.Events),this._history=[],this.loadedAds=[],this.parser=null,this.xmlhttp=null,this.errorSent=!1}return t.prototype.flashSwf=function(){var t=this.player.getContainer();return t.querySelector("object")},t.prototype.genCallback=function(t,e){var i=this.player.id+":vast:"+e.name+":"+Math.random().toString(16).substr(2);return t.on(i,e,this),i},t.prototype.load=function(t){this._history.push(t),this.errorSent=!1,this.xmlhttp=this.getXhrRequest(t)},t.prototype.getXhrRequest=function(t){var e=this,i=function(i){e.ajaxComplete(i,t)},s=function(i,s){if(e.player){var r=e.flashSwf();return r&&"Invalid XML"!==i&&"Timeout"!==i&&e.utils.crossdomain(s)?void r.triggerFlash("loadXml",s,e.genCallback(r,a),e.genCallback(r,n)):void e.ajaxError(i,t)}},a=function(i){e.parseXmlString(i,t)},n=function(i){e.utils.log(i),e.ajaxError(i,t)};return this.utils.ajax(t,i,s,{withCredentials:!0,retryWithoutCredentials:!0,requireValidXML:!0,timeout:this._scheduledAd.requestTimeout})},t.prototype.destroy=function(){O(this.xmlhttp),this.player=null},t.prototype.scheduledAd=function(){return this._scheduledAd},t.prototype.allAds=function(){return this.loadedAds},t.prototype.adPod=function(){var t=[];return this.utils.foreach(this.loadedAds,function(e,i){i.sequence&&t.push(i)}),t.sort(function(t,e){return t.sequence-e.sequence}),t},t.prototype.adBuffet=function(){var t=[];return this.utils.foreach(this.loadedAds,function(e,i){i.sequence||t.push(i)}),t},t.prototype.history=function(){return this._history},t.prototype.parseXmlString=function(t,e){this.ajaxComplete({responseXML:q(t,this.utils)},e)},t.prototype.ajaxComplete=function(e,i){var s=this;this.parser=this.parser||new Ce;try{this.parser.parse(e.responseXML)}catch(a){return void this.sendErrorEvent(a.message,a.code||900,i)}var n=this.parser.parsedAds();n&&n.length?(this.loadedAds=n,this.options.wrapper=this.options.wrapper||[],this.options.wrapper.push(this.loadedAds[0].adsystem),this.utils.foreach(this.loadedAds,function(e,i){if(i.wrappedURI){s.options.wrappedTags=s.options.wrappedTags||[],s.options.wrappedTags.push(i.wrappedURI);var a=new t(s._scheduledAd,s.player,s.options);a.on(ct,function(){s.replaceWrappedAd(i,a.allAds())}),a.on(yt,function(t){s.sendAdpodErrorEvent(t.message,t.code,t.url),s.destroyWrappedAd(i,a)}),a.load(i.wrappedURI)}else s.options.wrapper.length>1&&(i.wrapper=s.options.wrapper.slice(0,-1),i.wrappedTags=s.options.wrappedTags)}),this.checkComplete()):this.sendErrorEvent("Ad Tag Empty",101,i)},t.prototype.destroyWrappedAd=function(t,e){var i=this._.indexOf(this.loadedAds,t);this.loadedAds.splice(i,1),e.destroy(),this.checkComplete()},t.prototype.replaceWrappedAd=function(t,e){var i=N(t,e,this.utils),s=this._.indexOf(this.loadedAds,t);Array.prototype.splice.apply(this.loadedAds,[s,1].concat(i)),this.checkComplete()},t.prototype.checkComplete=function(){var t=!1;this.utils.foreach(this.loadedAds,function(e,i){i.wrappedURI&&(t=!0)}),t||this.validateVast()},t.prototype.validateVast=function(){var t=this.loadedAds.slice(0),e=t.length;this._.map(t,function(e){e.media&&e.media.length||t.length--});var i=0===e,s=t.length!==e;return i||s?void this.sendErrorEvent("Ad Tag Empty",101,this._history[this._history.length-1]):void this.trigger(ct,{vloader:this})},t.prototype.ajaxError=function(t,e){"Invalid XML"===t?this.sendErrorEvent(t,100,e):this.sendErrorEvent("VAST could not be loaded",301,e)},t.prototype.firstUrl=function(){return this._history&&this._history.length?this._history[0]:""},t.prototype.sendAdpodErrorEvent=function(t,e,i){return 1===this.loadedAds.length?void this.sendErrorEvent(t,e,i):void this.trigger("adPodError",{message:t,code:e,vloader:this,url:this.firstUrl()||i,wrappedUrl:i})},t.prototype.sendErrorEvent=function(t,e,i){this.errorSent||(this.errorSent=!0,this.trigger(yt,{message:t,code:e,vloader:this,url:this.firstUrl()||i,wrappedUrl:i}))},t}(),xe={},Ve=function(t,e){var i=this,s=xe[e];return s?s:(function(t,e){t.jwplayerEntitlements=e()}(this,function(){return function(t,e,i){var s={canPlayAds:!0},a=new t.key(e),n=a.edition();if("unlimited"===n)return i(s);var r=a.token(),o=["//","entitlements.jwplayer.com","/",r,".json"];"file:"===window.location.protocol&&o.unshift("https:"),t.ajax(o.join(""),function(t){s.canPlayAds=!t||!t.response||t.response.canPlayAds!==!1,i(s)},function(){i(s)},{timeout:1e4,responseType:"json"})}}),xe[e]=new Promise(function(s,a){i.jwplayerEntitlements(t,e,function(t){return t.canPlayAds?void s():void a({message:"Ad Limit Reached"})})}))},Re=/^((https?:)?\/\/)?(secure)?pubads\.g\.doubleclick\.net\/gampad\/ads\?[\S]*$/,Le=/^((https?:)?\/\/)?bid\.g\.doubleclick\.net\/dbm\/vast\?[\S]*$/,Me=/^((https?:)?\/\/)?ad\.doubleclick\.net(\/ddm)?\/pfadx\/[\S]*$/,He=function(t,e,i){function s(e){if(e){St&&(I(St),St=null);var i=function(i){St=null;try{E(i.responseXML,xt),t.dispatchEvent("adSchedule",xt.getAdScheduleEventObject())}catch(s){return void q({id:Y,message:"Error parsing VMAP",code:1002,vmap:e})}if(st&&(Q(xt),Ct)){var a=d({type:wt});a&&O()}},s=function(t){St=null,X.log(t),Ct&&O(),q({id:Y,message:"Error Loading VMAP Schedule",code:"Timeout"===t?1007:1008,vmap:e})};St=X.ajax(e,i,s,{withCredentials:!0,retryWithoutCredentials:!0,requireValidXML:!0,timeout:xt.requestTimeout})}}function a(){st=!0,_t=new be(t,i),It=new he(tt),it=Vt.getOptParams(e)}function n(t){mt=!!t.active}function r(t){et.trigger(ut,t)}function o(e){var i=X.isMobile()&&!Z&&("pre"===at||t.isBeforePlay()||0===t.getPosition());i?(e&&e.type===wt||t.getState()===pt)&&(et.off(ut,v),et.once(ut,v)):v()}function d(t){if(mt)return!1;var e=xt.getPreRoll();return St?(o(t),!1):!(!nt&&e)||(bt=p(e),u(e,t),!1)}function l(t){if(!mt){var e=xt.getNextMidRoll(t.position,t.duration);e&&(bt=p(e),c(e,t))}}function h(t){if(!mt){var e=xt.getPostRoll();!dt&&e&&(bt=p(e),f(e,t))}}function p(t){return t._trackers?new ne(t._trackers,tt):null}function u(t,e){t._position="pre",nt=!0,t._id=k(12),m(t,e)}function c(t,e){t._position="mid",t._id=k(12),m(t,e)}function f(e,i){e._position="post",dt=!0,t.detachMedia(),e._id=k(12),m(e,i)}function m(t,e){at=t._position,clearTimeout(At),At=-1,"nonlinear"!==t._type&&(Ct||o(e)),t._adXML?(t._currentTag=t._currentTag||"clientloadedtag_"+lt++,P(t)):t._adQueue?A(t):(X.log("scheduled ad has no url or xml",t),O())}function v(){Ct=t.createInstream().init(),et.trigger("blockingStarted")}function y(e){var i=xt;g(e),xt.isVMAP()?i!==xt&&s(B(xt.getVMAP(),t,U(),it)):t.dispatchEvent("adSchedule",xt.getAdScheduleEventObject())}function g(e){var i=t.getPlaylistItem(e.index);xt=$.isObject(i)&&i.adschedule?Vt.getSchedule(i):Rt,R(),L(),D(),dt=!1,nt=!1,Q(xt),xt.reset()}function A(e){vt=e;var i=e._waterfallIndex||0,s=e._adQueue[i],a=B(s,t,U(),it);e._waterfallIndex=i+1,e._currentTag=a,$.isFunction(tt)&&tt({type:"tagReplacement",data:{actualTag:a,originalTag:s}}),T(e,a),b(e).load(a)}function P(t){t._currentTag=t._currentTag||t._adXML.toString(),T(t,t._currentTag),b(t).parseXmlString(t._adXML)}function k(t){return new Array(t+1).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,t)}function T(e,i){t.dispatchEvent("adRequest",w(e,i)),et._qoe.tick("adLoading"+e._id)}function w(t,e){var i=t._adQueue||{},s={},a=t.adbreakid,n=t._adTagQueue,r=t.skipoffset;if(a&&(s.adbreakid=a),n){var o=t._waterfallIndex-1;o=o<0?0:o,s.adtagid=n[o]}return $.isUndefined(r)||(s.skipoffset=r),$.extend(s,{id:t._id,tag:e||t._currentTag,client:"vast",adposition:t._position,offset:t._offSet,witem:t._waterfallIndex||1,wcount:i.length||1})}function b(e){var i=new Se(e,t);return i.on(ct,S),i.on(yt,F),i.on("adPodError",N),ht.push(i),bt&&!bt.started&&bt.breakStart(),i}function _(t){for(var e=ht.length;e--;)ht[e]===t&&(ht.splice(e,1),t.destroy())}function I(t){t.onload=null,t.onreadystatechange=null,t.onerror=null,"abort"in t&&t.abort()}function C(){St&&(I(St),St=null),R(),L(),D(),t.setCues([])}function S(t){var e=t.vloader.scheduledAd();Ct||"nonlinear"===e._type?x(t):(et.off("blockingStarted"),et.once("blockingStarted",function(){x(t)}))}function x(e){var i=e.vloader;clearTimeout(At),At=-1,vt.isWaterfalling||D(),_(i);var s=new oe(i,t,_t,It,it,tt);s.on(kt,M),s.on(Tt,H),s.on("adPodError",q);var a=s.init(Ct);return a?(Et=Ct,Ct=null,et.off("blockingStarted"),et.off(ut,v),Et&&Et.on("adBreakEnd",function(){bt&&bt.breakEnd()}),s.on(Pt,j),void ft.push(s)):void s.destroy()}function V(){D(),dt=!1,nt=!1}function R(){for(var t=ht.length;t--;){var e=ht[t];ht.length--,e.destroy()}}function L(){et.off(ut,v);for(var t=ft.length;t--;){var e=ft[t];ft.length--,e.destroy()}}function M(e){if(gt=!1,q(e),!gt&&K(vt)){Ct=Ct||Et;var i=$.extend({},vt);return i._offset=0,i.isWaterfalling=!0,void m(i)}L(),gt=!1,At=setTimeout(function(){At=-1,0===ht.length&&("post"===at&&t.attachMedia(),O())},0)}function H(e){if(vt={},"pre"===e.adposition&&(void 0===e.podcount||1===e.sequence)){et._qoe.tick("adImpression"+e.id);var i=et._qoe.between("adLoading"+e.id,"adImpression"+e.id);e.timeLoading=i}t.dispatchEvent(Tt,e)}function j(){0===ht.length&&"post"===at&&t.attachMedia()}function D(){if(ft.length){var t=ft[ft.length-1];t.clearNonlinear()}}function O(){if(Ct){var t=Ct;Ct=null,t.destroy(),et.off("blockingStarted"),et.off(ut,v)}Et=null}function N(t){var e=t.vloader,i=w(e.scheduledAd(),t.url);i.message=t.message,i.code=t.code,t.wrappedUrl!==t.url&&(i.wrappedTag=t.wrappedUrl),gt=!1,q(i)}function F(t){var e=t.vloader,i=e.allAds();if(_(e),i&&i.length){var s=i[0];if(s){var a=s.trackers;if(a&&a.error){var n=new ne(a,tt);n.error(t.code)}}}if(N(t),!gt&&K(vt)){var r=$.extend({},vt);return r._offset=0,r.isWaterfalling=!0,void m(r)}L(),gt=!1,At===-1&&(At=setTimeout(function(){At=-1,0===ht.length&&O()},0))}function q(e){X.extend(e,{client:"vast"}),bt&&bt.error(e.code),t.dispatchEvent(kt,e)}function U(){var t=window.location.href;return t=t.match(new RegExp(/^[^\/]*:\/\/\/?([^\/]*)/)),t&&t.length>1?t[1]:""}function Q(e){var i=e.getMidRolls(),s=[];i.length&&X.foreach(i,function(t,e){"nonlinear"!==e._type&&s.push({begin:e._offSet,text:it.cuetext})}),t.setCues(s)}var W=this,X=t.utils,z=t.getConfig().key,$=t._,J=t.getConfig(),Z=!!J.sdkplatform,tt=e.debug&&e.trackFn?e.trackFn:null,et=this,it={},st=!1,at="",nt=!1,dt=!1,lt=0,ht=[],ft=[],mt=!1,vt={},gt=!1,At=-1,Et=void 0,bt=void 0,_t=void 0,It=void 0,Ct=void 0,St=void 0,xt=void 0,Vt=new ve;this.version="7.9.4",et._qoe=new jwplayer.utils.Timer;var Rt=xt=Vt.getSchedule(e);xt.isVMAP()&&s(B(xt.getVMAP(),t,U(),it)),X.extend(this,t.Events),
t.on("destroyPlugin",function(){C()}),t.on({ready:a,beforePlay:d,cast:n,play:r,time:l,beforeComplete:h,playlistItem:y,playlistComplete:g,complete:V},this),t.pauseAd=function(t){if(t=!$.isBoolean(t)||t,ft.length){var e=ft[ft.length-1];t?e.pause():e.play()}},t.playAd=function(t){gt=!0,D();var e=void 0,i=0===it.requestTimeout?1/0:it.requestTimeout,s=0===it.creativeTimeout?1/0:it.creativeTimeout;e=$.isArray(t)?t.slice(0):[t];var a={_id:k(12),_adQueue:e,_waterfallIndex:0,_offset:0,_position:"api",requestTimeout:i||rt,creativeTimeout:s||ot};m(a)},Ve.call(this,X,z)["catch"](function(e){C(),t.off(null,null,W),t.playAd=X.noop,t.trigger(kt,{id:Y,client:G,message:"Ad Error: "+e.message,code:900,tag:""})}),this.destroy=C},je=window.jwplayerPluginJsonp||window.jwplayer().registerPlugin;je(G,"7.9",He,"vast.swf")}();
